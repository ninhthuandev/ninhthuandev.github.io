"use strict";var html5QrCodeForCamera=new Html5Qrcode("reader"),html5QrCodeForFileUpload=new Html5Qrcode("file-reader");function startScanningQrCode(e){var o=window.innerWidth,n=window.innerHeight,t=document.getElementById("reader").offsetWidth,r=n*t/o,i=.7*t;r<t&&(i=.7*r),Alpine.store("qrCode")&&(Alpine.store("qrCode").setScanning(!0),html5QrCodeForCamera.start(e,{fps:10,qrbox:{width:i,height:i}},function(e,o){html5QrCodeForCamera.stop().then(function(e){console.log("QR Code stopped",e)}).catch(function(e){console.log("Error",e)}).finally(function(){Alpine.store("qrCode").setScanning(!1),Alpine.store("qrCode").setDecodedInfo(e,o)})},function(e){console.log(e)}).catch(function(e){console.log(e)}))}function decodeQrCodeFromImage(e){if(0!==e.target.files.length){var o=e.target.files[0];html5QrCodeForFileUpload.scanFile(o,!0).then(function(e){Alpine.store("qrCode").setDecodedInfo(e,null)}).catch(function(e){console.log("Error cannot decode QR Code from image",e),Alpine.store("qrCode").setDecodedInfo(null,null,!0)})}}function stopScanningQrCode(){try{html5QrCodeForCamera.stop().then(function(e){console.log("QR Code stopped",e)}).catch(function(e){console.log("Error",e),html5QrCodeForCamera.clear()}).finally(function(){Alpine.store("qrCode").setScanning(!1)})}catch(e){html5QrCodeForCamera.clear(),console.error("ERR: ",e)}finally{Alpine.store("qrCode").setScanning(!1)}}var Tabs={CAMERA:"CAMERA",FILE_UPLOAD:"FILE_UPLOAD"};document.addEventListener("alpine:init",function(){Alpine.store("tab",{selectedTab:Tabs.CAMERA,isTab:function(e){return this.selectedTab===e},switchTab:function(e){this.selectedTab=e,Alpine.store("qrCode").setDecodedInfo(void 0,void 0),html5QrCodeForCamera.clear(),html5QrCodeForFileUpload.clear()}}),Alpine.store("cameraDevices",{devices:[{id:"",label:""}],selectedDevice:{},setDevices:function(e){this.devices=e,this.selectedDevice=e[0]},changeDevices:function(e){var o=e.target.value;this.selectedDevice=this.devices.find(function(e){return e.id===o})}}),Alpine.store("qrCode",{decodedText:void 0,decodedResult:void 0,scanning:!1,isError:!1,setDecodedInfo:function(e,o){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.decodedText=e,this.decodedResult=o,this.isError=n},setScanning:function(e){this.scanning=e}}),Html5Qrcode.getCameras().then(function(e){e&&e.length&&(console.log("Devices:",e),Alpine.store("cameraDevices").setDevices(e),console.log("Test",Alpine.store("cameraDevices").devices[0].id))}).catch(function(e){console.error("Error")})});
//# sourceMappingURL=qr-code-reader.js.map
