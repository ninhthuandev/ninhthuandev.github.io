"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);var o=r.call(e,t||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var QrCodeType={TEXT:"TEXT",URL:"URL",EMAIL:"EMAIL",VCARD:"VCARD",SMS:"SMS",WIFI:"WIFI"},MimeType={PNG:"image/png",SVG:"image/svg+xml",JPG:"image/jpeg"},urlRegex=/^(https?|chrome):\/\/[^\s$.?#].[^\s]*$/gm;function validateForm(e){for(var t in this.validation[e].rule){var r=this.validation[e].rule[t](this[e]);if(r.error){this.validation[e].error=!0,this.validation[e].message=r.message;break}this.validation[e].error=!1,this.validation[e].message=""}}function triggerDownloadImage(e,t){var r=document.createElement("a");r.href=e,r.download="qr-code."+Object.keys(MimeType).find(function(e){return MimeType[e]===t}).toLowerCase(),r.click()}function downloadQrCode(t){document.getElementById("qr-code-image");Alpine.store("qrCode").getBlobQrCodeForDownloading(t).then(function(e){t!==MimeType.SVG&&triggerDownloadImage(URL.createObjectURL(e),t)})}document.addEventListener("alpine:init",function(){Alpine.data("urlFormData",function(){return{url:"",validation:{url:{rule:{regex:function(e){return urlRegex.test(e)?{error:!1,message:""}:{error:!0,message:"Please input correct URL"}}},error:!1,message:""}},validate:function(e){validateForm.apply(this,[e])}}}),Alpine.data("emailFormData",function(){return{email:"",subject:"",body:"",toQrCodeStringFromEmailData:function(){return"mailto:".concat(this.email,"?subject=").concat(this.subject,"&body=").concat(this.body)},validation:{email:{rule:{regex:function(e){if(0===e.length)return{error:!1,message:""};return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{error:!1,message:""}:{error:!0,message:"Please input correct email"}}},error:!1,message:""}},validate:function(e){validateForm.apply(this,[e])}}}),Alpine.data("vCardFormData",function(){return{firstName:"",lastName:"",organization:"",jobTitle:"",phone:"",email:"",address:"",website:"",toQrCodeStringFromVCardData:function(){var e="BEGIN:VCARD\n            VERSION:3.0\n            N:".concat(this.lastName,";").concat(this.firstName,";;;\n            FN:").concat(this.firstName," ").concat(this.lastName,"\n            ORG:").concat(this.organization,"\n            TITLE:").concat(this.jobTitle,"\n            TEL:").concat(this.phone,"\n            EMAIL:").concat(this.email,"\n            ADR:;;").concat(this.address,";;;;;\n            URL:").concat(this.website,"\n            END:VCARD");return e=e.replace(/  +/g,""),console.log(e),e}}}),Alpine.data("smsFormData",function(){return{phoneNumber:"",message:"",toQrCodeStringFromSmsData:function(){return"SMSTO:".concat(this.phoneNumber,":").concat(this.message)}}}),Alpine.data("wifiFormData",function(){return{ssid:"",hidden:!1,password:"",encryption:"WPA",toQrCodeStringFromWifiData:function(){return"WIFI:S:".concat(this.ssid,";T:").concat(this.encryption,";P:").concat(this.password,";H:").concat(this.hidden?"true":"false",";")}}});var r={correctLevel:QRCode.CorrectLevel.M,drawer:"canvas",quietZone:20};Alpine.store("qrCode",{type:QrCodeType.TEXT,value:"",qrCode:null,generateQrCode:function(){var e=_objectSpread(_objectSpread({},r),{},{text:this.value});this.qrCode||(this.qrCode=new QRCode(document.getElementById("qr-code-image"),e)),this.qrCode.makeCode(this.value)},getBlobQrCodeForDownloading:function(o){var e=_objectSpread(_objectSpread({},r),{},{text:this.value,drawer:o===MimeType.SVG?"svg":"canvas",onRenderingEnd:function(e,t){if(o===MimeType.SVG){var r=new Blob([t],{type:MimeType.SVG});triggerDownloadImage(URL.createObjectURL(r),o)}else triggerDownloadImage(t,o)}}),t=document.createElement("div");t.style.width="1000px",new QRCode(t,e).makeCode(this.value)},changeValueAndGenerateQrCode:function(e){this.value=e,this.generateQrCode()},changeType:function(e){this.type=e},isType:function(e){return this.type===e}}),Alpine.store("qrCode").generateQrCode()});
//# sourceMappingURL=qr-code-generator.js.map
