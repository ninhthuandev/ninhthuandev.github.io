{"version":3,"sources":["pages/datetime-tools/timezone-converter/js/timezone-coverter.js"],"names":["darkFlatpickrThemeLink","document","createElement","id","rel","href","FLATPICKR_DATE_FORMAT","NORMAL_DATE_FORMAT","themeValue","Alpine","store","value","querySelector","addEventListener","head","appendChild","_document$querySelect","remove","currentDate","Date","currentDateTimeWithFormat","flatpickr","formatDate","currentTimeZone","DateTimeFormat","resolvedOptions","timeZone","Intl","supportedTimeZonesAndOffsets","supportedTimeZones","map","luxon","DateTime","local","setZone","offsetNameShort","toString","isNow","inputDateTime","outputDateTime","inputTimeZone","_this","this","outputTimeZone","checked","intervalSetDatetime","updateDatetimeToNow","setInterval","$event","convertTZ","clearDatetimeNow","clearInterval","changeInputDateTime","luxonOutputDate","fromFormat","zone","toFormat","console","log","enableSeconds","luxonInputDate","enableTime","defaultDate","flatpickrConfig","selectedDates","dateStr","instance","selector","placeHolder","autoCompleteConfig","cache","resultsList","element","list","data","results","length","message","query","setAttribute","noResults","resultItem","highlight","autoCompleteInputTimeZone","autoComplete","_objectSpread","input","focus","event","start","findIndex","setTimeout","index","selection","detail","scroll","find","autoCompleteOutputTimeZone"],"mappings":"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","file":"timezone-coverter.js","sourcesContent":["const darkFlatpickrThemeLink = document.createElement('link');\r\ndarkFlatpickrThemeLink.id = 'darkFlatpickrTheme';\r\ndarkFlatpickrThemeLink.rel = 'stylesheet';\r\ndarkFlatpickrThemeLink.href = 'https://npmcdn.com/flatpickr/dist/themes/dark.css';\r\n\r\nconst FLATPICKR_DATE_FORMAT = 'Y-m-d H:i:S';\r\nconst NORMAL_DATE_FORMAT = 'yyyy-MM-dd HH:mm:ss';\r\n\r\ndocument.addEventListener('alpine:init', () => {\r\n    Alpine.effect(() => {\r\n        const themeValue = Alpine.store('theme').value;\r\n        if (themeValue === 'dark') {\r\n            const darkFlatpickrThemeLinkElement = document.querySelector('#darkFlatpickrTheme');\r\n            if (!darkFlatpickrThemeLinkElement) {\r\n                document.head.appendChild(darkFlatpickrThemeLink);\r\n            }\r\n        } else {\r\n            document.querySelector('#darkFlatpickrTheme')?.remove();\r\n        }\r\n    });\r\n\r\n    let currentDate = new Date();\r\n    let currentDateTimeWithFormat = flatpickr.formatDate(currentDate, FLATPICKR_DATE_FORMAT);\r\n    let currentTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n    let supportedTimeZones = Intl.supportedValuesOf('timeZone');\r\n    let supportedTimeZonesAndOffsets = supportedTimeZones.map(timeZone => {\r\n        const GmtOffset = luxon.DateTime.local().setZone(timeZone).offsetNameShort;\r\n        return {\r\n            timeZone: timeZone,\r\n            offset: GmtOffset,\r\n            toString() {\r\n                return `${this.timeZone} (${this.offset})`;\r\n            }\r\n        };\r\n    });\r\n\r\n    Alpine.store('timeZone', {\r\n        isNow: false,\r\n        supportedTimeZonesAndOffsets: supportedTimeZonesAndOffsets,\r\n        inputDateTime: currentDateTimeWithFormat,\r\n        outputDateTime: '',\r\n        inputTimeZone: currentTimeZone,\r\n        outputTimeZone: supportedTimeZones[0],\r\n\r\n        intervalSetDatetime: null,\r\n\r\n        updateDatetimeToNow($event) {\r\n            this.isNow = $event.target.checked;\r\n            if (this.isNow) {\r\n                this.clearDatetimeNow();\r\n                this.intervalSetDatetime = setInterval(() => {\r\n                    this.inputDateTime = flatpickr.formatDate(new Date(), FLATPICKR_DATE_FORMAT);\r\n                    this.convertTZ();\r\n                }, 1000);\r\n            } else {\r\n                this.clearDatetimeNow();\r\n            }\r\n        },\r\n        clearDatetimeNow() {\r\n            if (this.intervalSetDatetime) {\r\n                clearInterval(this.intervalSetDatetime);\r\n                this.intervalSetDatetime = null;\r\n            }\r\n        },\r\n        changeInputDateTime(event) {\r\n            this.convertTZ();\r\n        },\r\n        convertTZ() {\r\n            console.log(this.inputDateTime, this.inputTimeZone, this.outputTimeZone);\r\n            const luxonInputDate = luxon.DateTime.fromFormat(this.inputDateTime, NORMAL_DATE_FORMAT, {zone: this.inputTimeZone});\r\n            const luxonOutputDate = luxonInputDate.setZone(this.outputTimeZone);\r\n            this.outputDateTime = luxonOutputDate.toFormat(NORMAL_DATE_FORMAT);\r\n            console.log(this.outputDateTime);\r\n        }\r\n    });\r\n\r\n    const flatpickrConfig = {\r\n        enableTime: true,\r\n        dateFormat: FLATPICKR_DATE_FORMAT,\r\n        defaultDate: currentDateTimeWithFormat,\r\n        enableSeconds: true,\r\n        onValueUpdate: function (selectedDates, dateStr, instance) {\r\n            Alpine.store('timeZone').inputDateTime = dateStr;\r\n        }\r\n    };\r\n    flatpickr(\"#datetime-picker-input\", flatpickrConfig);\r\n\r\n    const autoCompleteConfig = {\r\n        selector: \"#autoComplete\",\r\n        placeHolder: \"Search for Food...\",\r\n        data: {\r\n            src: supportedTimeZonesAndOffsets,\r\n            cache: true,\r\n        },\r\n        resultsList: {\r\n            maxResults: 10000,\r\n            element: (list, data) => {\r\n                if (!data.results.length) {\r\n                    // Create \"No Results\" message element\r\n                    const message = document.createElement(\"div\");\r\n                    // Add class to the created element\r\n                    message.setAttribute(\"class\", \"no_result\");\r\n                    // Add message text content\r\n                    message.innerHTML = `<span>Found No Results for \"${data.query}\"</span>`;\r\n                    // Append message element to the results list\r\n                    list.prepend(message);\r\n                }\r\n            },\r\n            noResults: true,\r\n        },\r\n        resultItem: {\r\n            highlight: true\r\n        },\r\n    };\r\n\r\n\r\n    const autoCompleteInputTimeZone = new autoComplete({\r\n        ...autoCompleteConfig,\r\n        selector: \"#autoCompleteInputTimeZone\",\r\n        events: {\r\n            input: {\r\n                focus: (event) => {\r\n                    autoCompleteInputTimeZone.start(' ');\r\n                    const index = supportedTimeZonesAndOffsets.findIndex(timeZone => timeZone.timeZone === Alpine.store('timeZone').inputTimeZone);\r\n                    setTimeout(() => {\r\n                        autoCompleteInputTimeZone.goTo(index);\r\n                    }, 0);\r\n                },\r\n                selection: (event) => {\r\n                    const selection = event.detail.selection.value;\r\n                    autoCompleteInputTimeZone.input.value = selection.toString();\r\n                    Alpine.store('timeZone').inputTimeZone = selection.timeZone;\r\n                    Alpine.store('timeZone').convertTZ();\r\n\r\n                    autoCompleteInputTimeZone.input.blur();\r\n                }\r\n            },\r\n            list: {\r\n                scroll: (event) => {\r\n                    console.log(\"Results List scrolled!\");\r\n                }\r\n            }\r\n        }\r\n    });\r\n    autoCompleteInputTimeZone.input.value = supportedTimeZonesAndOffsets.find(timeZone => timeZone.timeZone === currentTimeZone).toString();\r\n\r\n    const autoCompleteOutputTimeZone = new autoComplete({\r\n        ...autoCompleteConfig,\r\n        selector: \"#autoCompleteOutputTimeZone\",\r\n        events: {\r\n            input: {\r\n                focus: (event) => {\r\n                    autoCompleteOutputTimeZone.start(' ');\r\n                    const index = supportedTimeZonesAndOffsets.findIndex(timeZone => timeZone.timeZone === Alpine.store('timeZone').inputTimeZone);\r\n                    setTimeout(() => {\r\n                        autoCompleteOutputTimeZone.goTo(index);\r\n                    }, 0);\r\n                },\r\n                selection: (event) => {\r\n                    const selection = event.detail.selection.value;\r\n                    autoCompleteOutputTimeZone.input.value = selection.toString();\r\n                    Alpine.store('timeZone').outputTimeZone = selection.timeZone;\r\n                    Alpine.store('timeZone').convertTZ();\r\n\r\n                    autoCompleteOutputTimeZone.input.blur();\r\n                }\r\n            },\r\n            list: {\r\n                scroll: (event) => {\r\n                    console.log(\"Results List scrolled!\");\r\n                }\r\n            }\r\n        }\r\n    });\r\n    autoCompleteOutputTimeZone.input.value = supportedTimeZonesAndOffsets[0].toString();\r\n\r\n    Alpine.store('timeZone').convertTZ();\r\n});"]}